# Gamma vs Linear

> Gamma의 정의, Linear과의 차이점

* Gamma : 픽셀의 숫자 값과 실제 광도 사이의 관계를 정의한다. 실제 계산식에서 지수로 사용됨. 다르게 말하면, 사람이 눈으로 물체의 색을 보는 특성의 범위를 표현한것
  * 감마가 없으면 디지털 카메라로 캡쳐한 음영이 모니터에서 우리가 보는것처럼 보이지 않는다.
  * 광자 수가 두 배로 늘어나면 카메라의 센서에 두 배의 신호가 수신된다. (선형 관계)
  * 우리 눈은 광자 수가 두 배로 늘어나면 그보다 훨씬 더 밝다고 인식한다. (비선형 관계) 밝기가 올라갈수록 그 차이는 점점 줄어든다.
  * 결론적으로, 우리 눈은 밝은 톤보다 어두운 톤에 더 민감하다고 할 수 있다.
  * 데이터상의 밝기와 실제로 바라보는 세계를 비슷하게 만들기 위해 디지털 이미지는 '감마 인코딩'을 한다.
  * 감마 인코딩 값을 데이터로 가지는 색 공간을 sRGB라고 한다.
    * sRGB : 마이크로소프트와 HP가 협력하여 만든 모니터 및 프린터 표준 RGB 색 공간. encode/decode 를 하드웨어에서 지원한다. 해당 형태로 저장된 이미지는 화면에 보여질 때 자동으로 감마 인코딩이 되어서 보여진다. 비공식적 표준 규격이다.

* Linear Color space : 수치적 강도 값이 사람이 인지하는 강도와 비례하여 일치하는 색 공간. 색상을 올바르게 추가하고 곱할 수 있다.

* 감마 인코딩 된 이미지는 밝은 톤의 부분을 설명하기 위한 비트를 줄이고 어두운 톤을 나타내는 비트를 늘린다.
* 실제 이미지를 나타낼 때, 256레벨의 정보(8비트)만 있으면 충분히 부드럽게 이미지가 프린팅된다. 그러나 해당 정보량으로 linear encoding을 시도하면 posterization 현상이 발생한다.
  * posterization : 색과 색 사이의 중간값을 표현할 정보가 없어 이미지에서 색이 변경되는 곳이 명확하게 나뉘어지는 현상.
  * 여기서 설명하는 linear encoding이란, 카메라에 들어온 값을 그대로 이미지에 적는 것이다.
* 선형 인코딩을 사용할 때 posterization 현상을 피하려면 8배의 정보가 필요하다. (11비트)


* 우리가 정상적으로 인식하는 이미지의 감마 값을 1이라 할 때, 이미지에 저장되는 값들은 감마 인코딩을 거쳐서 저장된다. 이 경우 이미지는 원래의 이미지보다 훨씬 밝아진다.
* 감마 인코딩을 거치지 않은 데이터 정보 그대로를 표현한 이미지는 모니터로 출력될 때 예상했던 이미지보다 훨씬 어둡게 나온다.

* 유니티에서 리니어 렌더링을 사용하는 이유
  * 실제 계산 시 값의 정확성을 보장해주기 위해
  * 감마 파이프 라인을 사용하면 텍스쳐가 쉐이더로 넘어가면서 감마 보정을 하고, 라이팅 계산을 한 뒤 디스플레이에 출력된다. 이 때 라이팅 계산에 사용되는 값이 감마값이기 때문에 현실과 약간 다를 수 있다.
  * Physically Based Rendering을 하려면 선형 파이프 라인을 사용해야 한다.

* 감마 인코딩을 하면 어두운 톤을 나타내는 비트가 늘어나는데 왜 이미지가 밝아지나?
  * 어두운 톤을 표현하기 위해 많은 비트를 할애하기 때문에 데이터에 저장되는 값이 선형 인코딩과 비교했을 때 더 크다.(0을 어두운 쪽이라 가정했을 때)
  * 감마 인코딩된 데이터 값을 선형 그래프로 그렸을 때, 그 값이 일반적인 계산값보다 크기 때문에 이미지가 더 밝게 보인다.

# Reference

* [UNDERSTANDING GAMMA CORRECTION](https://www.cambridgeincolour.com/tutorials/gamma-correction.htm)
* [GAMMA AND LINEAR SPACE - WHAT THEY ARE AND HOW THEY DIFFER](http://www.kinematicsoup.com/news/2016/6/15/gamma-and-linear-space-what-they-are-how-they-differ)
* [한글 좋아](https://m.blog.naver.com/team_csr/221026941983)